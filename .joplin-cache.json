{"note":[{"id":"eca39d14dbf84484939d280766dd6681","title":"å†è°ˆ git ä¸Ž ssh é…ç½®","body":"## è¯´åœ¨å‰é¢\n\nå¯¹äºŽ GitHubï¼Œè¦ä»£ç† HTTP åè®®çš„å…‹éš†é“¾æŽ¥ï¼Œç›´æŽ¥æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼ˆæ³¨æ„ä»£ç†åœ°å€ï¼‰ï¼š\n\n```bash\ngit config --global http.https://github.com.proxy socks5h://127.0.0.1:7890\n# socks5h://è¡¨ç¤ºä¸»æœºåç”± SOCKS æœåŠ¡å™¨è§£æž\n```\n\nä¸‹é¢è¯´ä¸€ä¸‹å‡ ç§ SSH åè®®çš„å…‹éš†é“¾æŽ¥\n\n## Part1 SSH åè®®åªæ”¹ç«¯å£ä¸é…ç½®ä»£ç†\n\n```bash\ngit@github.com:waleslau/dotfiles.git\nssh://git@ssh.github.com:443/waleslau/dotfiles.git\n```\n\nåŽé¢é‚£ç§é“¾æŽ¥å°±æ˜¯ç›´æŽ¥åœ¨è¿žæŽ¥é‡ŒæŒ‡å®šäº† ssh çš„ç«¯å£ã€‚å¦‚æžœå› æŸäº›åŽŸå› æ— æ³•è®¿é—® 22 ç«¯å£ï¼Œæœ‰ä¸¤ä¸ªé€‰æ‹©ï¼Œä¸€æ˜¯ä½¿ç”¨åŽé¢é‚£ç§é“¾æŽ¥ï¼ŒäºŒæ˜¯åœ¨ `~/.ssh/config` å†…æ·»åŠ å¦‚ä¸‹é…ç½®ï¼Œä¸¤ç§æ–¹å¼æ˜¯ç­‰ä»·çš„\n\n```bash\nHost github.com\n        Hostname ssh.github.com\n        Port 443\n        User git\n```\n\nä¸Šé¢é…ç½®çš„å†…å®¹çš„æ„æ€å¤§æ¦‚å°±æ˜¯å½“è®¿é—®`git@github.com`æ—¶è‡ªåŠ¨ç¿»è¯‘æˆ`git@ssh.github.com:443`\n\n## Part2 SSH åè®®åŠ ä¸Šä»£ç†çš„é…ç½®\n\nç”±äºŽä¼—æ‰€å‘¨çŸ¥çš„åŽŸå› ï¼Œåªæ˜¯æ”¹åˆ° 443 ç«¯å£å¯èƒ½ä¸å¤Ÿï¼Œéœ€è¦èµ°ä»£ç†ã€‚è¿˜æ˜¯åˆ†ä¸¤ç§æƒ…å†µè®¨è®ºï¼š\n\nå¯¹äºŽ`git@github.com:waleslau/dotfiles.git` è¿™æ ·çš„é“¾æŽ¥ï¼Œè¦è®©å®ƒèµ°ä»£ç†ï¼Œéœ€è¦ç¼–è¾‘é…ç½®æ–‡ä»¶`~/.ssh/config`æ·»åŠ ä¸‹é¢å†…å®¹\n\n```bash\nHost github.com\n       User git\n       ProxyCommand \"C:\\Program Files\\Git\\mingw64\\bin\\connect.exe\" -S 127.0.0.1:7890 %h %p\n```\n\n## ä»¥ä¸‹å†…å®¹ä»…ä½œäº†è§£\n> å†™å®Œæ‰å‘çŽ°ä¸‹é¢å†…å®¹å…¶å®žæœ‰ç‚¹ç”»è›‡æ·»è¶³äº†ï¼Œæ—¢ç„¶éƒ½ç”¨ä»£ç†äº†ï¼Œæ”¹ä¸æ”¹443ç«¯å£ä¹Ÿå°±æ— æ‰€è°“äº†ï¼Œå¯¹ä½¿ç”¨è€…æ¥è®²æ²¡æœ‰ä»»ä½•åŒºåˆ«ðŸ¤£\n\nå¦‚æžœä½ æƒ³è®©`ssh://git@ssh.github.com:443/waleslau/dotfiles.git`è¿™ç§é£Žæ ¼çš„é“¾æŽ¥ä¹Ÿèµ°ä»£ç†çš„è¯ï¼Œéœ€è¦åœ¨ Host åŽé¢åŠ ä¸Š`ssh.github.com`ã€‚\n\n```bash\nHost github.com ssh.github.com\n        Hostname ssh.github.com\n        Port 443\n        User git\n        ProxyCommand \"C:\\Program Files\\Git\\mingw64\\bin\\connect.exe\" -S 127.0.0.1:7890 %h %p\n```\n\n## æ›´å¤šç›¸å…³å†…å®¹\n\n- [ç»™ SSH è®¾ç½®ä»£ç†](https://blog.oopsky.top/2022/03/ssh-over-proxy/)\n- [çªç ´ç½‘ç»œé™åˆ¶è®¿é—® GitHub](https://blog.oopsky.top/2022/03/way-to-access-github/)","createdTime":1671342540000,"updatedTime":1671412200000,"resources":[],"tags":[{"id":"095da2386f07443ebb0734b02855924e","title":"proxy","parent_id":""},{"id":"19dd60b67acb4fcf8d864e334d8c8eb7","title":"git","parent_id":""},{"id":"bc0486755a3b4115821089dff75175d0","title":"blog","parent_id":""},{"id":"f432ae6d0ac84bd7a6fa93387182c341","title":"ssh","parent_id":""}]},{"id":"a7b61f3fa1934555a3a519c34a61cd75","title":"ä½¿ç”¨ davfs2 æŒ‚è½½ webdav","body":"### é…ç½® davfs2\r\n\r\n- ç¼–è¾‘ /etc/davfs2/davfs2.conf å–æ¶ˆä»¥ä¸‹é¡¹çš„æ³¨é‡Šå¹¶æ›´æ”¹å€¼\r\n\r\n```bash\r\nignore_dav_header 1\r\nuse_locks 0\r\n```\r\n\r\n- é…ç½®ç”¨æˆ·å/å¯†ç \r\n\r\nç¼–è¾‘ /etc/davfs2/secrets æœ«å°¾æ·»åŠ \r\n\r\n```bash\r\nhttps://dav.jianguoyun.com/dav/ username password\r\n# ä¹Ÿå¯ä»¥æœ‰å­ç›®å½•\r\nhttps://dav.jianguoyun.com/dav/dir1 username password\r\nhttps://dav.jianguoyun.com/dav/dir2 username password\r\n```\r\n\r\n### æ‰‹åŠ¨æŒ‚è½½\r\n\r\n```bash\r\n#åˆ›å»ºæŒ‚è½½è·¯å¾„\r\nmkdir /webdav\r\n#æ‰‹åŠ¨æŒ‚è½½\r\nmount -t davfs https://dav.jianguoyun.com/dav/ /webdav/\r\n```\r\n\r\næ‰‹åŠ¨æŒ‚è½½æµ‹è¯•è¿‡æ²¡é—®é¢˜åŽé…ç½®å¼€æœºè‡ªåŠ¨æŒ‚è½½\r\n\r\n### è‡ªåŠ¨æŒ‚è½½\r\n\r\nç¼–è¾‘ /etc/fstab æœ«å°¾æ·»åŠ \r\n\r\n```bash\r\nhttps://dav.jianguoyun.com/dav/ /webdav/ davfs rw,user,sync,noauto,uid=idea,_netdev 0 0\r\n```\r\n\r\nç¼–è¾‘`etc/systemd/system/mnt-webdav-service.service`\r\n\r\n```bash\r\n[Unit]\r\nDescription=Mount WebDAV Service\r\nAfter=network-online.target\r\nWants=network-online.target\r\n\r\n[Service]\r\nType=oneshot\r\nExecStart=bash -c 'for i in {1..15}; do if ping -c 1 dav.jianguoyun.com; hen mount /webdav; break; else sleep 1; fi; done'\r\nExecStop=umount /webdav\r\nRemainAfterExit=true\r\n\r\n[Install]\r\nWantedBy=default.target\r\n```\r\n","createdTime":1670672789172,"updatedTime":1671351234797,"resources":[],"tags":[{"id":"6476ae726bf34e28b8f9f5e3345d7af0","title":"linux","parent_id":""},{"id":"af939074a9e34a099426f8eb244a74b9","title":"webdav","parent_id":""},{"id":"bc0486755a3b4115821089dff75175d0","title":"blog","parent_id":""}]},{"id":"ce1c7e8fd2f349fa8516d01e2af4fc00","title":"linux ä¸Šå‡ ç§ç¡çœ æ¨¡å¼æ¯”è¾ƒ","body":"```bash\nsystemctl suspend                 -- Suspend the system\nsystemctl hibernate     -- Hibernate the system\nsystemctl suspend-then-hibernate  -- Suspend the system for a period of time, and then hibernate it\nsystemctl hybrid-sleep  -- Hibernate and suspend the system\n```\n\n## suspend\n\næ™®é€šçš„æŒ‚èµ·ï¼ˆæˆ–è€…è¯´ç¡çœ ï¼‰ï¼Œæœºå™¨èƒ½ä»¥æœ€å¿«çš„é€Ÿåº¦è¢«å”¤é†’ã€‚ä¸å»ºè®®åœ¨ç¬”è®°æœ¬ä¸æ’ç”µæ—¶ä½¿ç”¨ï¼Œå®¹æ˜“ç¡æ­»(ç”µæ± è€—å°½åŽä¸¢å¤±å·¥ä½œçŠ¶æ€)ã€‚\n\n## hibernate\n\næ™®é€šçš„ä¼‘çœ ï¼Œçº¦ç­‰äºŽå®Œå…¨å…³æœºï¼Œä½†ä¼šä¿ç•™ä¸Šæ¬¡çš„å†…å­˜çŠ¶æ€åˆ°ç¡¬ç›˜å†…ï¼Œå”¤é†’åŽå†æ¢å¤ã€‚é€Ÿåº¦ç¨æ…¢ï¼Œå¥½å¤„æ˜¯ä¸ç”¨æ‹…å¿ƒç¡æ­»ï¼ˆæ¯•ç«Ÿå·²ç»â€œå®Œå…¨å…³æœºâ€äº†:joy_cat:ï¼‰ã€‚\n\n## suspend-then-hibernate\n\nå…ˆæŒ‚èµ·ï¼Œç»è¿‡ä¸€æ®µæ—¶é—´åŽç³»ç»Ÿè‡ªåŠ¨å”¤é†’å¹¶æ‰§è¡Œä¼‘çœ æ“ä½œã€‚\n\nä½†é»˜è®¤çš„ç­‰å¾…æ—¶é—´ä¸€èˆ¬éƒ½æ¯”è¾ƒé•¿ï¼Œï¼ˆæ–‡æ¡£é‡Œè¯´æ˜¯ 120minï¼Œ`/etc/systemd/sleep.conf`é‡Œçš„é»˜è®¤é…ç½®å†™çš„æ˜¯ 180minï¼‰ï¼Œç”µæ± ä¸ç»™åŠ›çš„è¯ï¼Œä»æœ‰ç¡æ­»çš„é£Žé™©ï¼Œå¦‚ä½¿ç”¨æ­¤æ¨¡å¼å»ºè®®æ ¹æ®ç¬”è®°æœ¬æƒ…å†µä»¥åŠè‡ªå·±çš„éœ€æ±‚è®¾å®šä¸€ä¸ªè¾ƒçŸ­çš„æ—¶é—´ã€‚\n\n## hybrid-sleep\n\næ··åˆç¡çœ ï¼Œsuspend çš„åŒæ—¶ä¹ŸæŠŠå†…å­˜çŠ¶æ€å¤‡ä»½åˆ°ç¡¬ç›˜ï¼Œç¡çœ é€Ÿåº¦æ¯” suspend ç¨æ…¢ï¼Œå”¤é†’é€Ÿåº¦å¤§å·®ä¸å·®ï¼Œå¯ä»¥é˜²æ­¢ç¡æ­»ã€‚\n\næˆ‘èµ·åˆä»¥ä¸ºå®ƒçš„æ•ˆæžœåªæ˜¯ suspend çš„åŒæ—¶ä¹ŸæŠŠå†…å­˜çŠ¶æ€å¤‡ä»½åˆ°ç¡¬ç›˜ä»¥é¿å…ç¡æ­»ï¼Œä½†åœ¨å®žé™…ä½¿ç”¨æ—¶å‘çŽ°æˆ‘çš„ç¬”è®°æœ¬åœ¨ suspend æ—¶ä»ä¼šå‘çƒ­ï¼ˆè€Œä¸”å‘çƒ­é‡å¾ˆå¯è§‚ï¼Œå‡ ä¹Žæ¯”çœç”µæ¨¡å¼ä¸‹ç©ºè½½è¿˜çƒ­äº†ï¼Œè€—ç”µä¼°è®¡ä¹Ÿå°ä¸äº†ï¼‰ï¼Œä½† hybrid-sleep æ—¶å‡ ä¹Žæ²¡æœ‰å‘çƒ­ï¼Œæˆ‘è§‰å¾—å®ƒåº”è¯¥åšäº†æ›´å¤šçš„å¤„ç†ã€‚ä¸æŽ’é™¤ suspend åœ¨æˆ‘çš„æœ¬å­ä¸Šæ²¡æœ‰æ­£å¸¸å·¥ä½œè¿™ä¸ªå¯èƒ½\n\n> æˆ‘å‘çŽ°æˆ‘çš„ç¬”è®°æœ¬åœ¨ suspend æ—¶ä»ä¼šå‘çƒ­ï¼ˆè€Œä¸”å‘çƒ­é‡å¾ˆå¯è§‚ï¼Œå‡ ä¹Žæ¯”çœç”µæ¨¡å¼ä¸‹ç©ºè½½è¿˜çƒ­äº†ï¼Œè€—ç”µä¼°è®¡ä¹Ÿå°ä¸äº†ï¼‰ï¼Œä½† hybrid-sleep æ—¶å‡ ä¹Žæ²¡æœ‰å‘çƒ­ï¼ˆå’Œåœ¨ Windows 11 ä¸‹ç¡çœ çš„è¡¨çŽ°å·®ä¸å¤šï¼‰ã€‚\n> suspend æ˜¯æ™®é€šçš„æŒ‚èµ·ï¼Œhybrid-sleep æ˜¯æ··åˆç¡çœ ï¼Œä»Žæ–‡æ¡£é‡Œçš„çš„ä»‹ç»æ¥çœ‹æ··åˆç¡çœ åªæ˜¯æ¯”æ™®é€šçš„æŒ‚èµ·å¤šäº†ä¸ªä¿å­˜å†…å­˜çŠ¶æ€åˆ°ç¡¬ç›˜çš„æ“ä½œï¼ŒæŒ‰ç†è¯´å®ƒä¿©çš„åŠŸè€—è¡¨çŽ°åº”è¯¥æ˜¯ä¸€æ ·çš„å•Šï¼Œæ˜¯ hybrid-sleep åœ¨æŽ§åˆ¶åŠŸè€—æ–¹é¢åšäº†æ›´å¤šçš„å¤„ç†ï¼Œè¿˜æ˜¯ suspend åœ¨æˆ‘çš„æœ¬å­ä¸Šæ²¡æœ‰æ­£å¸¸å·¥ä½œå‘¢ï¼Ÿ\n> <https://forum.suse.org.cn/t/topic/15224>\n\n## è§£å†³\n\n```bash\n# /etc/systemd/sleep.conf\n[Sleep]\n#AllowSuspend=yes\n#AllowHibernation=yes\n#AllowSuspendThenHibernate=yes\n#AllowHybridSleep=yes\n#SuspendMode=\n#SuspendState=mem standby freeze\n#HibernateMode=platform shutdown\n#HibernateState=disk\n#HybridSleepMode=suspend platform shutdown\n#HybridSleepState=disk\n#HibernateDelaySec=180min\n\n# Disable useless items\nAllowHibernation=no\nAllowSuspendThenHibernate=no\n# Configure suspend as hybrid-sleep\nSuspendMode=suspend platform shutdown\nSuspendState=disk\n```\n","createdTime":1670672789090,"updatedTime":1671350378831,"resources":[],"tags":[{"id":"6476ae726bf34e28b8f9f5e3345d7af0","title":"linux","parent_id":""},{"id":"bc0486755a3b4115821089dff75175d0","title":"blog","parent_id":""}]}],"resource":[]}
