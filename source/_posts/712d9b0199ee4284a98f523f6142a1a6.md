---
layout: post
title: ä½¿ç”¨ WinSW æŠŠå¯æ‰§è¡Œæ–‡ä»¶å®‰è£…ä¸ºæœåŠ¡
abbrlink: 712d9b0199ee4284a98f523f6142a1a6
tags:
  - windows
categories:
  - ğŸ“æŠ€æœ¯æ‚è°ˆ
date: 1672905960000
updated: 1672905960000
---
> [https://github.com/winsw/winsw](https://github.com/winsw/winsw)

## å‚æ•°åˆ—è¡¨

| Command                                                                                    | Description                                              |
| ------------------------------------------------------------------------------------------ | -------------------------------------------------------- |
| [install](https://github.com/winsw/winsw/tree/v3/docs/cli-commands.md#install-command)     | Installs the service.                                    |
| [uninstall](https://github.com/winsw/winsw/tree/v3/docs/cli-commands.md#uninstall-command) | Uninstalls the service.                                  |
| [start](https://github.com/winsw/winsw/tree/v3/docs/cli-commands.md#start-command)         | Starts the service.                                      |
| [stop](https://github.com/winsw/winsw/tree/v3/docs/cli-commands.md#stop-command)           | Stops the service.                                       |
| [restart](https://github.com/winsw/winsw/tree/v3/docs/cli-commands.md#restart-command)     | Stops and then starts the service.                       |
| [status](https://github.com/winsw/winsw/tree/v3/docs/cli-commands.md#status-command)       | Checks the status of the service.                        |
| [refresh](https://github.com/winsw/winsw/tree/v3/docs/cli-commands.md#refresh-command)     | Refreshes the service properties without reinstallation. |
| [customize](https://github.com/winsw/winsw/tree/v3/docs/cli-commands.md#customize-command) | Customizes the wrapper executable.                       |
| [dev ps](https://github.com/winsw/winsw/tree/v3/docs/cli-commands.md#dev-ps-command)       | Draws the process tree associated with the service.      |
| [dev kill](https://github.com/winsw/winsw/tree/v3/docs/cli-commands.md#dev-kill-command)   | Terminates the service if it has stopped responding.     |
| [dev list](https://github.com/winsw/winsw/tree/v3/docs/cli-commands.md#dev-list-command)   | Lists services managed by the current executable.        |

## ä½¿ç”¨æ–¹å¼

å…ˆè¯´ç»“è®º

* è‹¥ `WinSW.exe` å’Œ `myapp.xml` ä¸åœ¨åŒä¸€ç›®å½•

  * ä½¿ç”¨ `WinSW.exe install .\myapp.xml` æ“ä½œæœåŠ¡
* è‹¥ `WinSW.exe` å’Œ `myapp.xml` åœ¨åŒä¸€ç›®å½•

  * å¯ä»¥ä½¿ç”¨ `WinSW.exe install .\myapp.xml` æ“ä½œæœåŠ¡
  * ä¹Ÿå¯ä»¥æŠŠ `WinSW.exe` é‡å‘½åä¸º `myapp.exe`ï¼Œç„¶åä½¿ç”¨ `myapp install` æ“ä½œæœåŠ¡

æœåŠ¡ç¤ºä¾‹ï¼š
`chfs-service.xml`ï¼š

```xml
<service>
  <id>chfs-service</id>
  <!-- name å’Œ description å­—æ®µå¯ä»¥çœç•¥ -->
  <name>CUTE HTTP FILE SERVER</name>
  <description> http://iscute.cn/chfs </description>
  <!-- ä¸‹é¢çš„å¯æ‰§è¡Œæ–‡ä»¶å¯ä»¥æ”¾åˆ°å½“å‰ç›®å½•ä¹Ÿå¯ä»¥æ”¾åˆ°å…¶ä»–ç›®å½•ï¼Œæ”¾åˆ°å…¶ä»–ç›®å½•å°±è¦ç”¨ç»å¯¹åœ°å€ -->
  <executable>D:\WIN-WORKSPACE\scoop\apps\chfs\current\chfs.exe</executable>
  <arguments> --rule="::r|root:123456:rwd" --path="D:\\" </arguments>
  <!-- æŠŠæ—¥å¿—æ–‡ä»¶éƒ½æ”¾åˆ°xmlæ‰€åœ¨ä½ç½®çš„å­ç›®å½• -->
  <logpath>%BASE%\logs</logpath>
  <log mode="roll" />
</service>
```

### å…¨å±€æ–¹å¼

1. ä»[å‘å¸ƒé¡µé¢](https://github.com/winsw/winsw/releases)ä¸‹è½½ `WinSW.exe`
2. åˆ›å»ºä¸€ä¸ªä¸“é—¨ç”¨æ¥æ”¾ xml æ–‡ä»¶çš„ç›®å½•ï¼ŒæŠŠ `WinSW.exe` æ”¾å…¥å…¶ä¸­ï¼Œåˆ›å»º `myapp1.xml`ã€`myapp2.xml` ...
3. ç„¶åå¯ä»¥ä½¿ç”¨å½¢ä¼¼ä¸‹é¢çš„å‘½ä»¤æ“ä½œæ¯ä¸ªæœåŠ¡

```bash
WinSW.exe install .\myapp1.xml
WinSW.exe install .\myapp2.xml
```

> ä¹Ÿå¯ä»¥éšä¾¿æ‰¾ä¸ªå…¶ä»–åœ°æ–¹ï¼ŒæŠŠ `WinSW.exe` æ”¾å…¥å…¶ä¸­ï¼Œå¹¶åŠ å…¥ `PATH`ï¼Œæ€»ä¹‹èƒ½è®¿é—®åˆ° WinSW\.exe å°±è¡Œ

### æ†ç»‘æ–¹å¼

1. ä¸‹è½½ `WinSW.exe`
2. åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼ŒæŠŠ `WinSW.exe` æ”¾å…¥å…¶ä¸­å¹¶é‡å‘½åä¸º `myapp.exe`
3. åœ¨ç›¸åŒæ–‡ä»¶å¤¹å†…åˆ›å»º `myapp.xml`
4. ç„¶åå¯ä»¥ä½¿ç”¨å½¢ä¼¼ä¸‹é¢çš„å‘½ä»¤æ“ä½œæœåŠ¡

```bash
myapp install
myapp start
myapp stop
myapp uninstall
```

ç›®å½•ç»“æ„ï¼š

```yml
â”œâ”€â”€ chfs-service.exe
â””â”€â”€ chfs-service.xml
```
