---
layout: post
title: å†è°ˆ git ä¸ ssh é…ç½®
abbrlink: eca39d14dbf84484939d280766dd6681
tags:
  - proxy
  - git
  - ssh
date: 1671342540000
updated: 1671342540000
---

## è¯´åœ¨å‰é¢

å¯¹äº GitHubï¼Œè¦ä»£ç† HTTP åè®®çš„å…‹éš†é“¾æ¥ï¼Œç›´æ¥æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼ˆæ³¨æ„ä»£ç†åœ°å€ï¼‰ï¼š

```bash
git config --global http.https://github.com.proxy socks5h://127.0.0.1:7890
# socks5h://è¡¨ç¤ºä¸»æœºåç”± SOCKS æœåŠ¡å™¨è§£æ
```

ä¸‹é¢è¯´ä¸€ä¸‹å‡ ç§ SSH åè®®çš„å…‹éš†é“¾æ¥

## Part1 SSH åè®®åªæ”¹ç«¯å£ä¸é…ç½®ä»£ç†

```bash
git@github.com:waleslau/dotfiles.git
ssh://git@ssh.github.com:443/waleslau/dotfiles.git
```

åé¢é‚£ç§é“¾æ¥å°±æ˜¯ç›´æ¥åœ¨è¿æ¥é‡ŒæŒ‡å®šäº† ssh çš„ç«¯å£ã€‚å¦‚æœå› æŸäº›åŸå› æ— æ³•è®¿é—® 22 ç«¯å£ï¼Œæœ‰ä¸¤ä¸ªé€‰æ‹©ï¼Œä¸€æ˜¯ä½¿ç”¨åé¢é‚£ç§é“¾æ¥ï¼ŒäºŒæ˜¯åœ¨ `~/.ssh/config` å†…æ·»åŠ å¦‚ä¸‹é…ç½®ï¼Œä¸¤ç§æ–¹å¼æ˜¯ç­‰ä»·çš„

```bash
Host github.com
        Hostname ssh.github.com
        Port 443
        User git
```

ä¸Šé¢é…ç½®çš„å†…å®¹çš„æ„æ€å¤§æ¦‚å°±æ˜¯å½“è®¿é—® `git@github.com` æ—¶è‡ªåŠ¨ç¿»è¯‘æˆ `git@ssh.github.com:443`

## Part2 SSH åè®®åŠ ä¸Šä»£ç†çš„é…ç½®

ç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œåªæ˜¯æ”¹åˆ° 443 ç«¯å£å¯èƒ½ä¸å¤Ÿï¼Œéœ€è¦èµ°ä»£ç†ã€‚è¿˜æ˜¯åˆ†ä¸¤ç§æƒ…å†µè®¨è®ºï¼š

å¯¹äº `git@github.com:waleslau/dotfiles.git` è¿™æ ·çš„é“¾æ¥ï¼Œè¦è®©å®ƒèµ°ä»£ç†ï¼Œéœ€è¦ç¼–è¾‘é…ç½®æ–‡ä»¶ `~/.ssh/config` æ·»åŠ ä¸‹é¢å†…å®¹

```bash
Host github.com
       User git
       ProxyCommand "C:\Program Files\Git\mingw64\bin\connect.exe" -S 127.0.0.1:7890 %h %p
```

## ä»¥ä¸‹å†…å®¹ä»…ä½œäº†è§£

> å†™å®Œæ‰å‘ç°ä¸‹é¢å†…å®¹å…¶å®æœ‰ç‚¹ç”»è›‡æ·»è¶³äº†ï¼Œæ—¢ç„¶éƒ½ç”¨ä»£ç†äº†ï¼Œæ”¹ä¸æ”¹ 443 ç«¯å£ä¹Ÿå°±æ— æ‰€è°“äº†ï¼Œå¯¹ä½¿ç”¨è€…æ¥è®²æ²¡æœ‰ä»»ä½•åŒºåˆ« ğŸ¤£

å¦‚æœä½ æƒ³è®© `ssh://git@ssh.github.com:443/waleslau/dotfiles.git` è¿™ç§é£æ ¼çš„é“¾æ¥ä¹Ÿèµ°ä»£ç†çš„è¯ï¼Œéœ€è¦åœ¨ Host åé¢åŠ ä¸Š `ssh.github.com`ã€‚

```bash
Host github.com ssh.github.com
        Hostname ssh.github.com
        Port 443
        User git
        ProxyCommand "C:\Program Files\Git\mingw64\bin\connect.exe" -S 127.0.0.1:7890 %h %p
```

## æ›´å¤šç›¸å…³å†…å®¹

- [ç»™ SSH è®¾ç½®ä»£ç†](https://blog.oopsky.top/2022/03/ssh-over-proxy/)
- [çªç ´ç½‘ç»œé™åˆ¶è®¿é—® GitHub](https://blog.oopsky.top/2022/03/way-to-access-github/)
