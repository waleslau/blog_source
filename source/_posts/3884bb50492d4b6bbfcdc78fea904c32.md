---
layout: post
title: ä½¿ç”¨ fsarchiver å¤‡ä»½ã€æ¢å¤ Linux åˆ†åŒº
abbrlink: 3884bb50492d4b6bbfcdc78fea904c32
tags:
  - linux
  - fsarchiver
categories:
  - ğŸ“Linux
date: 1658051760000
updated: 1658051760000
---
## ä»‹ç»

è¯¥é¡¹ç›®çš„ç›®çš„æ˜¯æä¾›ä¸€ä¸ªå®‰å…¨çµæ´»çš„æ–‡ä»¶ç³»ç»Ÿå¤‡ä»½/éƒ¨ç½²å·¥å…·ï¼Œå¯ä»¥å°†æ–‡ä»¶ç³»ç»Ÿ(åˆ†åŒº)çš„å†…å®¹ä¿å­˜åˆ°ä¸€ä¸ªå½’æ¡£æ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”æ”¯æŒæ¢å¤å½’æ¡£åˆ°ä¸€ä¸ªæ¯”åŸå§‹åˆ†åŒºå°çš„æ–°åˆ†åŒº(åªè¦æœ‰è¶³å¤Ÿçš„ç©ºé—´æ¥å­˜å‚¨æ•°æ®)ã€‚å®ƒè¿˜å¯ä»¥æ¢å¤æ•°æ®åˆ°ä¸åŸå…ˆæ–‡ä»¶ç³»ç»Ÿä¸åŒæ ¼å¼çš„åˆ†åŒºã€‚

è¦å®‰è£…å®ƒï¼Œè¯·è®¿é—® [FSArchiver - Installation](https://www.fsarchiver.org/installation/) æŸ¥çœ‹å¸®åŠ©

## å¦‚ä½•ä½¿ç”¨

è¯´åœ¨å‰é¢ï¼š
è™½ç„¶ fsarchiver æ”¯æŒåœ¨ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿæ—¶å¤‡ä»½,ä½†ä¸ºäº†é¿å…æ„å¤–ï¼Œæœ€å¥½æŠŠè¦å¤‡ä»½çš„åˆ†åŒºå¸è½½æˆ–è€…æŒ‚è½½ä¸ºåªè¯»ï¼Œäº¦æˆ–è€…å¼•å¯¼åˆ°ä¸€ä¸ª[åŒ…å« fsarchiver çš„æ•‘æ´ç³»ç»Ÿ](https://www.system-rescue.org/Download/)å†è¿›è¡Œæ“ä½œ

```bash
# å¤‡ä»½æ–‡ä»¶ç³»ç»Ÿ
sudo fsarchiver -v -j7 -Z10 savefs /data/partition_backup/sdb1.xfs.fsa /dev/sdb1

# ä»å¤‡ä»½æ¢å¤æ–‡ä»¶ç³»ç»Ÿ
sudo fsarchiver restfs /data/partition_backup/sdb1.xfs.fsa /dev/sdb2

# é»˜è®¤æƒ…å†µä¸‹ä¼šä¿æŒåŸæ¥çš„uuidï¼Œè‹¥æƒ³è¦é‡ç½®uuidï¼Œåªéœ€åœ¨ç›®æ ‡åˆ†åŒºååŠ ä¸€ä¸ªå‚æ•°
sudo fsarchiver restfs /data/partition_backup/sdb1.xfs.fsa /dev/sdb2,uuid=`uuidgen`
```

éƒ¨åˆ†å‚æ•°è§£é‡Šï¼š

* `savefs` : ä¿å­˜è®¾å¤‡ä¸Šçš„æ–‡ä»¶ç³»ç»Ÿåˆ°å½’æ¡£ã€‚
* `restfs` : ä»å½’æ¡£æ¢å¤æ–‡ä»¶ç³»ç»Ÿåˆ°è®¾å¤‡ã€‚
* `-Z level` : Zstd å‹ç¼©çº§åˆ«, å–å€¼èŒƒå›´ 1-22 ä¹‹é—´
* `-j threads` : å¤šçº¿ç¨‹å‹ç¼©
* `-v` : è¯¦ç»†æ¨¡å¼ï¼ˆå¯ä»¥å¤šæ¬¡ä½¿ç”¨ä»¥å¢åŠ è¯¦ç»†ç¨‹åº¦ï¼Œä¾‹å¦‚ `-vv`ï¼‰ã€‚è¿™äº›ç»†èŠ‚å°†è¢«æ‰“å°åˆ°æ§åˆ¶å°ã€‚
* `uuid=$(uuidgen)` : éšæœºç”Ÿæˆä¸€ä¸ª uuid

## å…¶ä»–ç±»ä¼¼é¡¹ç›®

* [Clonezilla](https://clonezilla.org/)
* [Partclone](https://partclone.org/)
